// prisma/schema.prisma

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id               String      @id @unique @default(uuid())
  rollNo           String       @unique
  password         String
  type             UserType?
  Meeting          Meeting?    @relation(fields: [meetingId], references: [id])
  meetingId        String?
  ClausesFor       Clauses[]   @relation(name: "For")
  clausesForId     String?
  ClausesAgainst   Clauses[]    @relation(name: "Against")
  clausesAgainstId String?
  ClausesAbstain   Clauses[]    @relation(name: "Abstain")
  clausesAbstainId String?
  Responses        Responses[]
}

model Meeting {
  id          String    @id @unique @default(uuid())
  title       String
  description String?
  date        DateTime  //date of creation
  attendes    User[]
  clauses     Clauses[]
}

model Clauses {
  id          String      @id @unique @default(uuid())
  title       String
  description String?
  Meeting     Meeting?    @relation(fields: [meetingId], references: [id])
  meetingId   String?
  for         User[]      @relation(name: "For")
  against     User[]      @relation(name: "Against")
  abstain     User[]      @relation(name: "Abstain")
  Responses   Responses[]
}

model Responses {
  id        String   @id @unique @default(uuid())
  response  String
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id])
  userId    String
  clauses   Clauses  @relation(fields: [clausesId], references: [id])
  clausesId String
}

enum UserType {
  LEGESLATOR
  ADMIN
  DEVELOPER
}
